<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shushant's Chat</title>
    <style>
        /* CSS stays the same for consistent look */
        body { font-family: 'Segoe UI', sans-serif; background: #e5ddd5; display: flex; justify-content: center; padding: 20px; }
        #chat-container { width: 100%; max-width: 400px; height: 90vh; background: white; display: flex; flex-direction: column; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        #header { background: #075e54; color: white; padding: 15px; text-align: center; border-radius: 10px 10px 0 0; }
        #messages { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 8px 12px; border-radius: 8px; max-width: 70%; font-size: 14px; }
        .me { align-self: flex-end; background: #dcf8c6; border-bottom-right-radius: 0; }
        .friend { align-self: flex-start; background: #fff; border: 1px solid #ddd; border-bottom-left-radius: 0; }
        #input-area { display: flex; padding: 10px; border-top: 1px solid #ddd; }
        input { flex: 1; border: 1px solid #ccc; padding: 10px; border-radius: 20px; outline: none; }
        button { background: #075e54; color: white; border: none; padding: 0 15px; margin-left: 5px; border-radius: 20px; cursor: pointer; }
    </style>
</head>
<body>

<div id="chat-container">
    <div id="header">Chatting with Aditya</div>
    <div id="messages"></div>
    <div id="input-area">
        <input type="text" id="msgInput" placeholder="Type a message...">
        <button id="sendBtn">Send</button>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, push, onChildAdded, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const configShushant = {
        apiKey: "AIzaSyATCUjWe1bbp2yOiZwOzBATrHfU2CE7rPY",
        databaseURL: "https://shushant-3b425-default-rtdb.firebaseio.com",
        projectId: "shushant-3b425"
    };

    const configAditya = {
        apiKey: "AIzaSyBKQJki3JUr5pDhgOxOQRmXpOY7-gOj2Bk",
        databaseURL: "https://learnify-ada08-default-rtdb.firebaseio.com",
        projectId: "learnify-ada08"
    };

    const appShushant = initializeApp(configShushant, "shushantApp");
    const appAditya = initializeApp(configAditya, "adityaApp");

    const dbShushant = ref(getDatabase(appShushant), 'chat');
    const dbAditya = ref(getDatabase(appAditya), 'chat');

    const display = document.getElementById('messages');
    const input = document.getElementById('msgInput');
    const btn = document.getElementById('sendBtn');

    btn.onclick = () => {
        if (!input.value.trim()) return;
        const data = { sender: "Shushant", text: input.value, time: serverTimestamp() };
        
        push(dbShushant, data);
        push(dbAditya, data);
        
        input.value = "";
    };

    onChildAdded(dbShushant, (snap) => {
        const m = snap.val();
        const div = document.createElement('div');
        div.className = `msg ${m.sender === "Shushant" ? "me" : "friend"}`;
        div.textContent = `${m.sender}: ${m.text}`;
        display.appendChild(div);
        display.scrollTop = display.scrollHeight;
    });
</script>
</body>
</html>